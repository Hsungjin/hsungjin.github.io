---
layout: post
title: Flutter Bloc ì— ëŒ€í•œ ê¸°ì´ˆ ì˜ˆì œ
date: 2024-11-26 15:11:33 +0900
categories: [Flutter]
tags: [Flutter, Bloc]
description: í”ŒëŸ¬í„°ì˜ ëŒ€í‘œì ì¸ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ Blocì— ëŒ€í•´ ì•Œì•„ë³´ì
toc: true
math: true
mermaid: true
image:
  path: /assets/post/bloc/bloc_2.png
  width: 1000   # in pixels
  height: 400   # in pixels
  alt: bloc
---

ì²˜ìŒ í”ŒëŸ¬í„° ê°œë°œìë¡œ ì»¤ë¦¬ì–´ë¥¼ ì‹œì‘í•˜ë ¤ê³ í• ë•Œ ë©´ì ‘ì—ì„œ ì œì¼ ë§ì´ ë°›ì€ ì§ˆë¬¸ì´ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ ì–¼ë§ˆë‚˜ ì•„ëŠ”ì§€ì˜€ë‹¤. ğŸ¤”

ê¸°ì¡´ì— iOSë§Œ ì¤€ë¹„í•˜ë˜ ë‚˜ëŠ” í”ŒëŸ¬í„°ì˜ ìƒíƒœê´€ë¦¬ì— ëŒ€í•´ ìì„¸íˆ ì•Œì§€ ëª»í–ˆë‹¤.

iOSì—ì„œëŠ” ì£¼ë¡œ Combineì´ë‚˜ RxSwiftë¥¼ TCAë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ í”ŒëŸ¬í„°ì—ì„œëŠ” ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì¥ë‹¨ì ê³¼ ì ì ˆí•œ ì‚¬ìš© ì‹œê¸°ë¥¼ íŒŒì•…í•˜ì§€ ëª»í•˜ê³  ìˆì—ˆë‹¤.

ì§€ê¸ˆ íšŒì‚¬ì—ì„œë„ ì£¼ë¡œ GetX ë¥¼ ì“°ê³  ìˆëŠ” ìƒíƒœì´ê³ ,

ì–´ì©Œë‹¤ ë³´ë‹ˆ íƒ€íšŒì‚¬ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ë„˜ê²¨ë°›ê²Œ ë˜ì—ˆëŠ”ë° ê¸°ì¡´ì— êµ¬í˜„ëœ providerë¥¼ ì‚¬ìš©í•´ì„œ ì•±ì„ ì™„ì„±í•œ ê²½í—˜,

ê°•ì˜ë¥¼ ë”°ë¼í•˜ë©´ì„œ riverpodìœ¼ë¡œ Todoë¥¼ ë§Œë“œëŠ” ê²ƒ ë§ê³ ëŠ” ìƒíƒœê´€ë¦¬ì— ëŒ€í•´ì„œ ê¹Šê²Œ ì´í•´í•˜ì§€ ëª»í•˜ëŠ”ê²ƒ ê°™ë‹¤ê³  ìƒê°í–ˆë‹¤.

ë‚´ê°€ ìƒê°í–ˆì„ë•Œ ê·¸ë˜ë„ ë³´ëŒì°¬ 1ë…„ì˜ ê²½ë ¥ì´ë¼ê³  í•˜ë©´ ëŒ€í‘œì ì¸ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì‚¬ìš©í•´ë³´ê³  í•´ë‹¹ ì•±ë“¤ì„ ì¶œì‹œí•´ì•¼ ëœë‹¤ê³  ìƒê°í•œë‹¤. ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ë´ì•¼ ì§„ì •í•œ ì´í•´ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” ì‚¬ì´ë“œí”„ë¡œì íŠ¸ì— Blocì„ ì ìš©í•˜ê¸° ì´ì „ì— ê³µì‹ë¬¸ì„œì˜ íŠœí† ë¦¬ì–¼ì„ ë³´ë©´ì„œ Blocì— ëŒ€í•´ ìì„¸í•˜ê²Œ ì•Œì•„ë³´ë ¤ê³ í•œë‹¤. Blocì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì»´í¬ë„ŒíŠ¸(Business Logic Component)ì˜ ì•½ìë¡œ, êµ¬ê¸€ì´ ì¶”ì²œí•˜ëŠ” ìƒíƒœê´€ë¦¬ íŒ¨í„´ì´ê¸°ë„ í•˜ë‹¤.

<!-- start post -->
## 1. Blocì— ëŒ€í•œ ì´í•´

Blocì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì»´í¬ë„ŒíŠ¸(Business Logic Component)ì˜ ì•½ìë¡œ, êµ¬ê¸€ì´ ì¶”ì²œí•˜ëŠ” ìƒíƒœê´€ë¦¬ íŒ¨í„´ì´ë‹¤.

Bloc íŒ¨í„´ì€ Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìƒíƒœ ê´€ë¦¬ë¥¼ ë³´ë‹¤ êµ¬ì¡°ì ì´ê³  ì¼ê´€ë˜ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

Blocì€ ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•˜ë©° ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ê³  ì´ë¥¼ ìƒíƒœë¡œ ë³€í™˜í•˜ê³  ì´ ê³¼ì •ì—ì„œ `Streams`ë¥¼ í™œìš©í•˜ì—¬ ë¹„ë™ê¸° ë°ì´í„° íë¦„ì„ ê´€ë¦¬í•œë‹¤.

ìš°ì„  ê³µì‹ë¬¸ì„œ ìƒì—ì„œ Blocì— ëŒ€í•´ì„œ ì´í•´ë¥¼ í• ë ¤ë©´ ê¼­ ì•Œì•„ì•¼ í•˜ëŠ” ê°œë…ì´ ìˆë‹¤ê³  ì•ˆë‚´ë¥¼ í•´ì¤€ë‹¤.

Cubitê³¼ Streamsì„ ê¸°ì´ˆì ìœ¼ë¡œ ì´í•´ë¥¼ í•´ì•¼ Blocì„ ì´í•´í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.

### 1. Streams

[Streams ê³µì‹ë¬¸ì„œ](https://dart.dev/libraries/async/using-streams) [Bloc ê³µì‹ë¬¸ì„œ](https://bloclibrary.dev/ko/bloc-concepts/) ë“¤ì˜ ì„¤ëª…ì— ë”°ë¥´ë©´ StreamsëŠ” ì—°ì†ì ì¸ ë¹„ë™ê¸° ë°ì´í„°ì˜ íë¦„ì„ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ë¼ê³  í•œë‹¤.

ë§Œì•½ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´ [Async Programming in Dart](https://dart.dev/language/async) ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.

Streams ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ë¼ê³  ìƒê°í•˜ë©´ ë˜ë©° Dartì˜ `async*` í•¨ìˆ˜ë¥¼ í†µí•´ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ ì˜ˆì œëŠ” Bloc ê³µì‹ë¬¸ì„œì—ì„œ ê°€ì ¸ì˜¨ ì˜ˆì œì´ë‹¤.

```dart
Stream<int> countStream(int max) async* {
    for (int i = 0; i < max; i++) {
        yield i;
    }
}
```

í•¨ìˆ˜ë¥¼ `async*`ë¡œ í‘œì‹œí•˜ë©´ `yield` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ì˜ Streamì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. ìœ„ ì˜ˆì‹œì—ì„œëŠ” max ì •ìˆ˜ íŒŒë¼ë¯¸í„°ê¹Œì§€ì˜ ì •ìˆ˜ Streamì„ ë°˜í™˜í•˜ê³  ìˆë‹¤.

`async*` í•¨ìˆ˜ì—ì„œ `yield` í•  ë•Œ ë§ˆë‹¤ í•´ë‹¹ ë°ì´í„°ë¥¼ Streamì„ í†µí•´ í‘¸ì‰¬í•œë‹¤.

ìœ„ì˜ Streamì„ ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ì •ìˆ˜ë¡œ ì´ë£¨ì–´ì§„ Streamì˜ í•©ê³„ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤:

```dart
Future<int> sumStream(Stream<int> stream) async {
    int sum = 0;
    await for (int value in stream) {
        sum += value;
    }
    return sum;
}
```

ìœ„ì˜ í•¨ìˆ˜ë¥¼ asyncë¡œ ì‘ì„±í•˜ë©´ await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ìˆ˜ì˜ Futureë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.

ì´ ì˜ˆì œì—ì„œëŠ” Streamì˜ ê° ê°’ì„ ê¸°ë‹¤ë ¸ë‹¤ê°€ Streamì— ìˆëŠ” ëª¨ë“  ì •ìˆ˜ì˜ í•©ì„ ë°˜í™˜í•œë‹¤.

```dart
void main() async {
  // 0-9ê¹Œì§€ì˜ ì •ìˆ˜ Streamì„ ìƒì„±
    Stream<int> stream = countStream(10);
  // Streamì˜ ëª¨ë“  ì •ìˆ˜ì˜ í•©ì„ ë°˜í™˜
    int sum = await sumStream(stream);
    print(sum); // 45
}
```

ì´ë ‡ê²Œ Streamsë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ë™ê¸° ë°ì´í„°ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.

ë‹¤ìŒì€ Blocì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œì¸ Cubitì— ëŒ€í•´ ì•Œì•„ë³´ì.

### 2. Cubit

![bloc_1](/assets/post/bloc/bloc_1.png){:style="border:1px solid #eaeaea; border-radius: 7px; padding: 0px;" }

`Cubit`ì€ `BlocBase`ë¥¼ í™•ì¥í•œ í´ë˜ìŠ¤ë¡œ, ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë‹¨ìœ„ì´ë‹¤.

`Cubit`ì€ ìƒíƒœì˜ ì¦‰ State ë³€ê²½ì— ëŒ€í•´ notifyë¥¼ ë°›ê³  í˜„ì¬ Stateì— ë”°ë¼ì„œ ì¼ë¶€ë¥¼ ë‹¤ì‹œ ê·¸ë¦¬ëŠ” ê²ƒì„ ì²˜ë¦¬í•œë‹¤.

> ì°¸ê³ ë¡œ Cubitì€ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë‹¨ìœ„ì´ê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“  ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¨ìˆœíˆ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì—­í• ë§Œ í•œë‹¤.
>
> [Cubitì˜ ê¸°ì›](https://github.com/felangel/cubit/issues/69)

ì•„ë˜ëŠ” ê³µì‹ë¬¸ì„œì—ì„œ ê°€ì ¸ì˜¨ ì˜ˆì œë¥¼ ë³´ë©´ì„œ ë‚´ê°€ ì´í•´í•œ ë‚´ìš©ì´ë‹¤.

```dart
class CounterCubit extends Cubit<int> {
  CounterCubit() : super(0);
}
```

Cubitì„ ë§Œë“¤ë•Œ Cubitì´ ê´€ë¦¬í•  ìƒíƒœì˜ íƒ€ì…ì„ ì •ì˜í•´ì•¼ í•œë‹¤.

ìœ„ì—ì„œ CounterCubitì—ì„œ state íƒ€ì…ì€ int íƒ€ì…ì„ ê´€ë¦¬í•˜ëŠ” Cubitì´ë‹¤.

Cubitì„ ìƒì„±í• ë•Œ ë‘ë²ˆì§¸ë¡œ í•´ì•¼ë  ì¼ì€ ì´ˆê¸° ìƒíƒœë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤.

ìœ„ì˜ ì˜ˆì‹œì—ì„œëŠ” 0ì„ ì´ˆê¸° ìƒíƒœë¡œ ì„¤ì •í•˜ì˜€ë‹¤.

ì´ì œ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì¶”ê°€í•´ë³´ì.

ê° Cubitì€ emitì„ í†µí•´ ìƒˆë¡œìš´ stateë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.

```dart
class CounterCubit extends Cubit<int> {
  CounterCubit() : super(0);

  void increment() => emit(state + 1);
  void decrement() => emit(state - 1);
}
```

ìœ„ì˜ ì˜ˆì‹œ ì½”ë“œì—ì„œ CounterCubitì€ ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•˜ì—¬ CounterCubitì˜ stateë¥¼ ì—°ì‚°í•˜ëŠ” increment, decrement ë¼ëŠ” public methodë¥¼ ê°–ê³  ìˆë‹¤.

incrementê°€ í˜¸ì¶œë˜ë©´ state getterë¥¼ í†µí•´ Cubitì˜ í˜„ì¬ stateì— ì ‘ê·¼í•˜ê³ , í˜„ì¬ ìƒíƒœì— 1ì„ ë”í•˜ì—¬ ìƒˆë¡œìš´ stateë¥¼ emití•  ìˆ˜ ìˆë‹¤.

decrementë„ ë§ˆì°¬ê°€ì§€ë¡œ í˜„ì¬ stateì—ì„œ 1ì„ ë¹¼ì„œ ìƒˆë¡œìš´ stateë¥¼ emití•  ìˆ˜ ìˆë‹¤.

```dart
void main() {
  final cubit = CounterCubit();
  print(cubit.state); // 0
  cubit.increment();
  print(cubit.state); // 1
  cubit.decrement();
  print(cubit.state); // 0
  cubit.close();
}
```

ìœ„ì˜ ì˜ˆì‹œ ì½”ë“œëŠ” CounterCubitì„ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œì´ë‹¤.

CounterCubitì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸° ìƒíƒœë¥¼ ì¶œë ¥í•˜ë©´ 0ì´ ì¶œë ¥ëœë‹¤.

increment() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ stateê°€ 1 ì¦ê°€í•˜ì—¬ 1ì´ ì¶œë ¥ë˜ê³ ,

decrement() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ stateê°€ 1 ê°ì†Œí•˜ì—¬ 0ì´ ì¶œë ¥ëœë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ cubit.close()ë¥¼ í˜¸ì¶œí•˜ì—¬ Cubitì„ ë‹«ì•„ì¤€ë‹¤.

ì´ëŠ” Cubitì´ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œ ë¦¬ì†ŒìŠ¤ë¥¼ í•´ì œí•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì‘ì—…ì´ë‹¤.

ê·¸ëŸ¼ ì´ì œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ Cubitì´ ìƒˆë¡œìš´ Stateë¥¼ emit í•´ì„œ ê°’ì˜ ë³€í™”ê°€ ìƒê²¼ì„ë•ŒëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

ë°”ë¡œ `onChange` ë©”ì„œë“œë¥¼ í†µí•´ ê°’ì˜ ë³€í™”ë¥¼ ì¶”ì í•  ìˆ˜ ìˆë‹¤.

```dart
class CounterCubit extends Cubit<int> {
  CounterCubit() : super(0);

  void increment() => emit(state + 1);

  @override
  void onChange(Change<int> change) {
    super.onChange(change);
    print(change);
  }
}

void main() {
  CounterCubit()
    ..increment()
    ..close();
}
```

ì´ë ‡ê²Œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ Cubitì˜ stateê°€ ë³€ê²½ë ë•Œë§ˆë‹¤ onChange ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì–´ ë³€ê²½ëœ stateë¥¼ ì¶œë ¥í•˜ê²Œ ëœë‹¤.

> Change { currentState: 0, nextState: 1 } ì´ëŸ°ì‹ìœ¼ë¡œ ì¶œë ¥ì´ ë  ê²ƒ ì´ë‹¤.

ë˜í•œ Cubitì„ ì‚¬ìš©í•˜ë‹¤ê°€ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ë•ŒëŠ” addError ë©”ì„œë“œë¥¼ í†µí•´ ì—ëŸ¬ë¥¼ ì¶”ì í•  ìˆ˜ ìˆë‹¤.

```dart
class CounterCubit extends Cubit<int> {
  CounterCubit() : super(0);

  void increment() {
    addError(Exception('increment error!'), StackTrace.current);
    emit(state + 1);
  }

  @override
  void onChange(Change<int> change) {
    super.onChange(change);
    print(change);
  }

  @override
  void onError(Object error, StackTrace stackTrace) {
    print('$error, $stackTrace');
    super.onError(error, stackTrace);
  }
}
```

ì´ë ‡ê²Œ í•˜ë©´ ê¸°ì´ˆì ìœ¼ë¡œ Blocì„ ì‚¬ìš©í•˜ê¸°ì „ì— ì´í•´í•´ì•¼ í•  ê°œë…ë“¤ì€ ì•Œê²Œëœ ê²ƒì´ë‹¤.

ì´ì œ Blocì— ëŒ€í•´ì„œ ì„¤ëª…í•´ ë³´ë ¤ê³  í•œë‹¤

## 2.Bloc

![bloc_2](/assets/post/bloc/bloc_2.png){:style="border:1px solid #eaeaea; border-radius: 7px; padding: 0px;" }

Blocì€ Cubitì˜ ê¸°ëŠ¥ì„ í™•ì¥í•˜ì—¬ ë” ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ ìš”êµ¬ ì‚¬í•­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.

Blocì€ í•¨ìˆ˜ê°€ ì•„ë‹Œ eventë¥¼ í†µí•´ ìƒíƒœë¥¼ ë³€ê²½í•œë‹¤.

Bloc ìì²´ëŠ” Cubitê³¼ ìœ ì‚¬í•œ ìƒíƒœë¡œ ì‚¬ìš©ë˜ë©° í•¨ìˆ˜ í˜¸ì¶œí•´ì„œ stateë¥¼ ì§ì ‘ emit í•˜ëŠ” ëŒ€ì‹  eventë¥¼ í†µí•´ stateë¥¼ ìˆ˜ì‹ í•˜ê³  ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

### Bloc ë§Œë“¤ê¸°

Blocì„ ìƒì„±í•˜ëŠ” ê²ƒì€ Cubitë¥¼ ìƒì„±í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, ê´€ë¦¬í•  stateë¥¼ ì •ì˜í•˜ëŠ” ê²ƒ ì™¸ì— Blocì´ ì²˜ë¦¬í•  eventë„ ì •ì˜í•´ì•¼ í•œë‹¤ëŠ” ì ì´ ë‹¤ë¥´ë‹¤.

EventëŠ” Blocì— ëŒ€í•œ ì…ë ¥ìœ¼ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜ í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ëŠ” ë“±ì˜ ì‚¬ìš©ì ì…ë ¥ì— ì˜í•´ ë°œìƒí•œë‹¤.

```dart
sealed class CounterEvent {}

final class CounterIncrementPressed extends CounterEvent {}

class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0);
}
```

Cubitê³¼ ë§ˆì°¬ê°€ì§€ë¡œ superì— ì´ˆê¸° ìƒíƒœë¥¼ ì •ì˜í•´ì¤€ë‹¤.

```dart
sealed class CounterEvent {}

final class CounterIncrementPressed extends CounterEvent {}
final class CounterDecrementPressed extends CounterEvent {}

class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0) {
    on<CounterIncrementPressed>((event, emit) {
      emit(state + 1);
    });

    on<CounterDecrementPressed>((event, emit) {
      emit(state - 1);
    });
  }
}
```

ê·¸ ë‹¤ìŒ Blocì€ Cubitì˜ í•¨ìˆ˜ê°€ ì•„ë‹Œ on<Event> ë©”ì„œë“œë¥¼ í†µí•´ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•œë‹¤.

ìœ„ì˜ ì˜ˆì‹œ ì½”ë“œì—ì„œëŠ” ëª¨ë“  CounterIncrementPressedì™€ CounterDecrementPressed eventë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ EventHandlerë¥¼ ë“±ë¡í–ˆë‹¤.

ë“¤ì–´ì˜¤ëŠ” ê° CounterIncrementPressedì™€ CounterDecrementPressed eventì— ëŒ€í•´ state getterì™€ emit(state + 1) ë˜ëŠ” (satate -1)ì„ í†µí•´ blocì˜ í˜„ì¬ ìƒíƒœì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

```dart
Future<void> main() async {
  final bloc = CounterBloc();
  print(bloc.state); // 0
  bloc.add(CounterIncrementPressed());
  await Future.delayed(Duration.zero);
  print(bloc.state); // 1
  bloc.add(CounterDecrementPressed());
  await Future.delayed(Duration.zero);
  print(bloc.state); // 0
  await bloc.close();
}
```

ìœ„ì˜ ì˜ˆì‹œ ì½”ë“œì—ì„œëŠ” ë¨¼ì € CounterBlocì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

ê·¸ëŸ° ë‹¤ìŒ ì´ˆê¸° stateì¸ Blocì˜ í˜„ì¬ stateë¥¼ ì¶œë ¥í•œë‹¤. ì•„ì§ ìƒˆë¡œìš´ stateê°€ emitë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ 0ì´ ì¶œë ¥ëœë‹¤.

ë‹¤ìŒìœ¼ë¡œ state ë³€ê²½í•˜ê¸° ìœ„í•´ CounterIncrementPressed eventë¥¼ ì¶”ê°€í•œë‹¤.

0ì—ì„œ 1ë¡œ ë³€ê²½ëœ Blocì˜ stateë¥¼ ì¶œë ¥í•˜ê³ 

ë‹¤ì‹œ CounterDecrementPressed eventë¥¼ ì¶”ê°€í•˜ë©´ 0ìœ¼ë¡œ ë³€ê²½ëœ stateë¥¼ ì¶œë ¥í•˜ê³ 

Blocì˜ closeë£° í˜¸ì¶œí•˜ì—¬ ë‚´ë¶€ state streamì„ ë‹«ëŠ”ë‹¤.

### Bloc Tutorial

#### 1. Counter

#### 2. Timer

#### 3. Infinite List

## ë‚´ê°€ ëŠë‚€ ê²°ë¡ 

ì´ë²ˆ ì•± ìƒëª…ì£¼ê¸° í•™ìŠµì„ í†µí•´ ëª‡ ê°€ì§€ ì¤‘ìš”í•œ ê¹¨ë‹¬ìŒì„ ì–»ì—ˆë‹¤.

ì²«ì§¸, Flutterì˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬ëŠ” ìƒê°ë³´ë‹¤ ë” ê¹Šì´ ìˆê³  ë³µì¡í•˜ë‹¤. ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ WidgetsBindingObserverì˜ 4ê°€ì§€ ìƒíƒœë§Œ ì•Œê³  ìˆì—ˆì§€ë§Œ, AppLifecycleListenerì˜ ë„ì…ê³¼ í•¨ê»˜ ë”ìš± ì„¸ë°€í•œ ì œì–´ê°€ ê°€ëŠ¥í•´ì¡Œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤.

ë‘˜ì§¸, í¬ë¡œìŠ¤ í”Œë«í¼ ê°œë°œì—ì„œëŠ” ê° í”Œë«í¼ì˜ íŠ¹ì„±ì„ ì •í™•íˆ ì´í•´í•˜ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. iOSì™€ Androidì˜ ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ ë°©ì‹ ì°¨ì´, ë©”ëª¨ë¦¬ ê´€ë¦¬ ì •ì±… ë“± í”Œë«í¼ë³„ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì§€ ì•Šìœ¼ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì…‹ì§¸, ì‹¤ì œ í”„ë¡œì íŠ¸ ê²½í—˜ì„ í†µí•´ ì´ë¡ ì  ì´í•´ë¥¼ ë„˜ì–´ì„  ì‹¤ì „ ì§€ì‹ì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ë‹¤. íŠ¹íˆ iOSì˜ ì—„ê²©í•œ ë°±ê·¸ë¼ìš´ë“œ ì œí•œê³¼ Androidì˜ ìƒëŒ€ì ìœ¼ë¡œ ìœ ì—°í•œ ì²˜ë¦¬ ë°©ì‹ì˜ ì°¨ì´ëŠ” ì‹¤ì œ ê°œë°œ ê³¼ì •ì—ì„œ ì¤‘ìš”í•œ ê³ ë ¤ì‚¬í•­ì´ ëœë‹¤.

ê²°ë¡ ì ìœ¼ë¡œ, Flutter ê°œë°œìëŠ” ë‹¨ìˆœíˆ í”„ë ˆì„ì›Œí¬ ìˆ˜ì¤€ì˜ ì´í•´ë¥¼ ë„˜ì–´, ê° í”Œë«í¼ì˜ íŠ¹ì„±ê³¼ ì œì•½ì‚¬í•­ì„ ê¹Šì´ ìˆê²Œ ì´í•´í•˜ê³  ìˆì–´ì•¼ í•œë‹¤. ì´ëŠ” ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ì¸ ì•± ê°œë°œì„ ìœ„í•œ í•„ìˆ˜ ì¡°ê±´ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

## [ì „ì²´ì½”ë“œ](https://github.com/Hsungjin/Flutter/tree/main/app_life_cycle)

## ì°¸ì¡°

[[Flutter] ì•±ì˜ ë¼ì´í”„ì‚¬ì´í´ ë‹¤ë£¨ê¸°](https://medium.com/@cody.yun/flutter-%EC%95%B1%EC%9D%98-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4-%EB%8B%A4%EB%A3%A8%EA%B8%B0-5a2aafbf7f4e)

[ì•ˆë“œë¡œì´ë“œ ì•¡í‹°ë¹„í‹° ìƒëª…ì£¼ê¸°(Life Cycle)](https://brunch.co.kr/@mystoryg/80)

[[iOS/Swift] ì•±ì˜ ìƒëª…ì£¼ê¸° (Appâ€™s life cycle)](https://velog.io/@ahneve/iOSSwift-%EC%95%B1%EC%9D%98-%EC%83%9D%EB%AA%85%EC%A3%BC%EA%B8%B0-Apps-life-cycle)

<!-- - [Mastering Shapes and Clipping in Flutter](https://medium.com/@moo_min/rive%EB%A5%BC-flutter%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-1533ccbfc7ac){:target="_blank"}
- [íŒ¨ìŠ¤íŠ¸ ìº í¼ìŠ¤ ê°•ì˜](https://fastcampus.co.kr/dev_online_dartflutter){:target="_blank"} -->
<!-- end post -->
